<svg width="1400" height="1000" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1400" height="1000" fill="#f8f9fa"/>
  
  <!-- Title -->
  <text x="700" y="30" text-anchor="middle" font-size="28" font-weight="bold" fill="#2c3e50">Student Management System - Complete Architecture</text>
  
  <!-- GitHub Actions CI/CD Pipeline -->
  <rect x="50" y="60" width="1300" height="120" fill="#24292e" rx="15"/>
  <text x="700" y="90" text-anchor="middle" font-size="20" font-weight="bold" fill="white">GitHub Actions CI/CD Pipeline</text>
  
  <!-- Pipeline Steps -->
  <rect x="80" y="110" width="140" height="50" fill="#28a745" rx="8"/>
  <text x="150" y="130" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Docker Build</text>
  <text x="150" y="145" text-anchor="middle" font-size="10" fill="#e6ffed">Push to main</text>
  
  <rect x="250" y="110" width="140" height="50" fill="#007bff" rx="8"/>
  <text x="320" y="130" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Terraform Plan</text>
  <text x="320" y="145" text-anchor="middle" font-size="10" fill="#cce5ff">Auto trigger</text>
  
  <rect x="420" y="110" width="140" height="50" fill="#6f42c1" rx="8"/>
  <text x="490" y="130" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Terraform Apply</text>
  <text x="490" y="145" text-anchor="middle" font-size="10" fill="#e6d7ff">Manual</text>
  
  <rect x="590" y="110" width="140" height="50" fill="#fd7e14" rx="8"/>
  <text x="660" y="130" text-anchor="middle" font-size="12" font-weight="bold" fill="white">K8s Deploy</text>
  <text x="660" y="145" text-anchor="middle" font-size="10" fill="#fff3e0">Auto after TF</text>
  
  <rect x="760" y="110" width="140" height="50" fill="#dc3545" rx="8"/>
  <text x="830" y="130" text-anchor="middle" font-size="12" font-weight="bold" fill="white">ArgoCD Install</text>
  <text x="830" y="145" text-anchor="middle" font-size="10" fill="#ffe6e6">Manual</text>
  
  <rect x="930" y="110" width="140" height="50" fill="#6c757d" rx="8"/>
  <text x="1000" y="130" text-anchor="middle" font-size="12" font-weight="bold" fill="white">TF Destroy</text>
  <text x="1000" y="145" text-anchor="middle" font-size="10" fill="#f8f9fa">Manual</text>
  
  <rect x="1100" y="110" width="140" height="50" fill="#20c997" rx="8"/>
  <text x="1170" y="130" text-anchor="middle" font-size="12" font-weight="bold" fill="white">Cleanup</text>
  <text x="1170" y="145" text-anchor="middle" font-size="10" fill="#e6fff9">Auto</text>
  
  <!-- Pipeline Arrows -->
  <path d="M 220 135 L 250 135" stroke="#ffffff" stroke-width="3" marker-end="url(#whitearrow)"/>
  <path d="M 390 135 L 420 135" stroke="#ffffff" stroke-width="3" marker-end="url(#whitearrow)"/>
  <path d="M 560 135 L 590 135" stroke="#ffffff" stroke-width="3" marker-end="url(#whitearrow)"/>
  <path d="M 730 135 L 760 135" stroke="#ffffff" stroke-width="3" marker-end="url(#whitearrow)"/>
  <path d="M 900 135 L 930 135" stroke="#ffffff" stroke-width="3" marker-end="url(#whitearrow)"/>
  <path d="M 1070 135 L 1100 135" stroke="#ffffff" stroke-width="3" marker-end="url(#whitearrow)"/>
  
  <!-- Arrow from GitHub to GCP -->
  <path d="M 700 180 L 700 220" stroke="#34495e" stroke-width="4" marker-end="url(#arrowhead)"/>
  
  <!-- Google Cloud Platform Container -->
  <rect x="50" y="230" width="1300" height="700" fill="#4285f4" fill-opacity="0.05" stroke="#4285f4" stroke-width="3" rx="20"/>
  <text x="80" y="260" font-size="24" font-weight="bold" fill="#4285f4">Google Cloud Platform</text>
  <text x="80" y="285" font-size="14" fill="#1a73e8">Project: aerial-handbook-462908-j3 • Region: us-central1</text>
  
  <!-- GKE Cluster Container -->
  <rect x="100" y="310" width="900" height="500" fill="#34a853" fill-opacity="0.08" stroke="#34a853" stroke-width="2" rx="15"/>
  <text x="130" y="340" font-size="20" font-weight="bold" fill="#34a853">Google Kubernetes Engine Cluster</text>
  <text x="130" y="365" font-size="14" fill="#137333">Cluster: my-gke-cluster • Node Pool: e2-medium instances</text>
  
  <!-- Namespace Containers -->
  <rect x="130" y="380" width="420" height="300" fill="#ffffff" stroke="#dee2e6" stroke-width="2" rx="10"/>
  <text x="150" y="405" font-size="16" font-weight="bold" fill="#495057">Namespace: default</text>
  
  <rect x="570" y="380" width="200" height="150" fill="#fff3cd" stroke="#ffc107" stroke-width="2" rx="10"/>
  <text x="590" y="405" font-size="16" font-weight="bold" fill="#856404">Namespace: argocd</text>
  
  <!-- Rails Application Deployment -->
  <rect x="150" y="420" width="180" height="140" fill="#dc3545" fill-opacity="0.1" stroke="#dc3545" stroke-width="2" rx="8"/>
  <text x="240" y="445" text-anchor="middle" font-size="14" font-weight="bold" fill="#dc3545">Rails Application</text>
  <text x="240" y="465" text-anchor="middle" font-size="12" fill="#721c24">Deployment: student-app</text>
  <text x="240" y="480" text-anchor="middle" font-size="11" fill="#6c757d">Replicas: 3</text>
  <text x="240" y="495" text-anchor="middle" font-size="11" fill="#6c757d">Image: sonbarse17/ruby-app:latest</text>
  <text x="240" y="510" text-anchor="middle" font-size="11" fill="#6c757d">Port: 3000</text>
  <text x="240" y="525" text-anchor="middle" font-size="11" fill="#6c757d">CPU: 500m • Memory: 512Mi</text>
  <text x="240" y="540" text-anchor="middle" font-size="10" fill="#6c757d">Health Checks: ✓</text>
  
  <!-- PostgreSQL StatefulSet -->
  <rect x="350" y="420" width="180" height="140" fill="#336791" fill-opacity="0.1" stroke="#336791" stroke-width="2" rx="8"/>
  <text x="440" y="445" text-anchor="middle" font-size="14" font-weight="bold" fill="#336791">PostgreSQL Database</text>
  <text x="440" y="465" text-anchor="middle" font-size="12" fill="#1a4971">StatefulSet: student-app-db</text>
  <text x="440" y="480" text-anchor="middle" font-size="11" fill="#6c757d">Replicas: 1</text>
  <text x="440" y="495" text-anchor="middle" font-size="11" fill="#6c757d">Image: sonbarse17/ruby-db:latest</text>
  <text x="440" y="510" text-anchor="middle" font-size="11" fill="#6c757d">Port: 5432</text>
  <text x="440" y="525" text-anchor="middle" font-size="11" fill="#6c757d">CPU: 500m • Memory: 1Gi</text>
  <text x="440" y="540" text-anchor="middle" font-size="10" fill="#6c757d">Persistent Storage: ✓</text>
  
  <!-- ArgoCD -->
  <rect x="590" y="420" width="160" height="90" fill="#ff6b35" fill-opacity="0.1" stroke="#ff6b35" stroke-width="2" rx="8"/>
  <text x="670" y="445" text-anchor="middle" font-size="14" font-weight="bold" fill="#ff6b35">ArgoCD</text>
  <text x="670" y="465" text-anchor="middle" font-size="12" fill="#cc4125">Helm Chart</text>
  <text x="670" y="480" text-anchor="middle" font-size="11" fill="#6c757d">Port: 80/443</text>
  <text x="670" y="495" text-anchor="middle" font-size="11" fill="#6c757d">GitOps Ready</text>
  
  <!-- Services Layer -->
  <rect x="150" y="580" width="180" height="80" fill="#28a745" fill-opacity="0.1" stroke="#28a745" stroke-width="2" rx="5"/>
  <text x="240" y="605" text-anchor="middle" font-size="13" font-weight="bold" fill="#28a745">ClusterIP Service</text>
  <text x="240" y="620" text-anchor="middle" font-size="11" fill="#155724">app-service</text>
  <text x="240" y="635" text-anchor="middle" font-size="11" fill="#6c757d">Port: 80 → 3000</text>
  <text x="240" y="650" text-anchor="middle" font-size="10" fill="#6c757d">Selector: app=student-app</text>
  
  <rect x="350" y="580" width="180" height="80" fill="#28a745" fill-opacity="0.1" stroke="#28a745" stroke-width="2" rx="5"/>
  <text x="440" y="605" text-anchor="middle" font-size="13" font-weight="bold" fill="#28a745">ClusterIP Service</text>
  <text x="440" y="620" text-anchor="middle" font-size="11" fill="#155724">db-service</text>
  <text x="440" y="635" text-anchor="middle" font-size="11" fill="#6c757d">Port: 5432 → 5432</text>
  <text x="440" y="650" text-anchor="middle" font-size="10" fill="#6c757d">Selector: app=student-app-db</text>
  
  <rect x="590" y="540" width="160" height="60" fill="#ffc107" fill-opacity="0.1" stroke="#ffc107" stroke-width="2" rx="5"/>
  <text x="670" y="565" text-anchor="middle" font-size="13" font-weight="bold" fill="#ffc107">LoadBalancer</text>
  <text x="670" y="580" text-anchor="middle" font-size="11" fill="#856404">argocd-server</text>
  <text x="670" y="595" text-anchor="middle" font-size="10" fill="#6c757d">External IP</text>
  
  <!-- Ingress Controller -->
  <rect x="150" y="700" width="380" height="80" fill="#17a2b8" fill-opacity="0.1" stroke="#17a2b8" stroke-width="2" rx="8"/>
  <text x="340" y="725" text-anchor="middle" font-size="16" font-weight="bold" fill="#17a2b8">GCE Ingress Controller</text>
  <text x="340" y="745" text-anchor="middle" font-size="12" fill="#0c5460">rails-ingress</text>
  <text x="340" y="760" text-anchor="middle" font-size="11" fill="#6c757d">External Load Balancer • SSL Termination</text>
  <text x="340" y="775" text-anchor="middle" font-size="11" fill="#6c757d">Path: / → app-service:80</text>
  
  <!-- Persistent Volume -->
  <rect x="350" y="690" width="180" height="60" fill="#6f42c1" fill-opacity="0.1" stroke="#6f42c1" stroke-width="2" rx="5"/>
  <text x="440" y="715" text-anchor="middle" font-size="13" font-weight="bold" fill="#6f42c1">Persistent Volume</text>
  <text x="440" y="730" text-anchor="middle" font-size="11" fill="#6c757d">Size: 30Gi • Class: standard</text>
  <text x="440" y="745" text-anchor="middle" font-size="10" fill="#6c757d">Mount: /var/lib/postgresql/data</text>
  
  <!-- Terraform State & Docker Registry -->
  <rect x="1050" y="310" width="280" height="200" fill="#623ce4" fill-opacity="0.08" stroke="#623ce4" stroke-width="2" rx="10"/>
  <text x="1070" y="340" font-size="16" font-weight="bold" fill="#623ce4">Infrastructure Management</text>
  
  <rect x="1070" y="360" width="240" height="60" fill="#623ce4" fill-opacity="0.1" stroke="#623ce4" stroke-width="1" rx="5"/>
  <text x="1190" y="380" text-anchor="middle" font-size="12" font-weight="bold" fill="#623ce4">Terraform State</text>
  <text x="1190" y="395" text-anchor="middle" font-size="10" fill="#6c757d">Backend: GCS Bucket</text>
  <text x="1190" y="410" text-anchor="middle" font-size="10" fill="#6c757d">Versioning: Enabled</text>
  
  <rect x="1070" y="430" width="240" height="60" fill="#2496ed" fill-opacity="0.1" stroke="#2496ed" stroke-width="1" rx="5"/>
  <text x="1190" y="450" text-anchor="middle" font-size="12" font-weight="bold" fill="#2496ed">Docker Registry</text>
  <text x="1190" y="465" text-anchor="middle" font-size="10" fill="#6c757d">DockerHub: sonbarse17</text>
  <text x="1190" y="480" text-anchor="middle" font-size="10" fill="#6c757d">Images: ruby-app, ruby-db</text>
  
  <!-- Migration Job -->
  <rect x="150" y="480" width="180" height="40" fill="#fd7e14" fill-opacity="0.1" stroke="#fd7e14" stroke-width="1" rx="5"/>
  <text x="240" y="495" text-anchor="middle" font-size="11" font-weight="bold" fill="#fd7e14">DB Migration Job</text>
  <text x="240" y="510" text-anchor="middle" font-size="10" fill="#6c757d">db:create, db:migrate, db:seed</text>
  
  <!-- External Access Section -->
  <rect x="50" y="950" width="1300" height="40" fill="#6c757d" fill-opacity="0.1" stroke="#6c757d" stroke-width="1" rx="8"/>
  <text x="700" y="970" text-anchor="middle" font-size="16" font-weight="bold" fill="#495057">External Access Points</text>
  <text x="300" y="985" text-anchor="middle" font-size="12" fill="#6c757d">🌐 Internet → GCE Load Balancer → Rails App</text>
  <text x="1100" y="985" text-anchor="middle" font-size="12" fill="#6c757d">🔧 ArgoCD → LoadBalancer Service → External IP</text>
  
  <!-- Connection Lines -->
  <!-- Rails to Service -->
  <path d="M 240 560 L 240 580" stroke="#28a745" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- DB to Service -->
  <path d="M 440 560 L 440 580" stroke="#28a745" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- ArgoCD to Service -->
  <path d="M 670 510 L 670 540" stroke="#ffc107" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- Service to Ingress -->
  <path d="M 240 660 L 240 700" stroke="#17a2b8" stroke-width="2" marker-end="url(#arrowhead)"/>
  <!-- DB to Storage -->
  <path d="M 440 660 L 440 690" stroke="#6f42c1" stroke-width="2" marker-end="url(#arrowhead)"/>
  
  <!-- Database connection line -->
  <path d="M 330 480 L 350 480" stroke="#6c757d" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="340" y="475" text-anchor="middle" font-size="9" fill="#6c757d">DB Connection</text>
  
  <!-- Migration Job connection -->
  <path d="M 240 520 L 240 540" stroke="#fd7e14" stroke-width="1" stroke-dasharray="3,3"/>
  
  <!-- Network Flow Indicators -->
  <circle cx="340" cy="820" r="8" fill="#17a2b8"/>
  <text x="340" y="825" text-anchor="middle" font-size="10" fill="white">LB</text>
  <text x="340" y="840" text-anchor="middle" font-size="10" fill="#6c757d">External IP</text>
  
  <circle cx="670" cy="620" r="8" fill="#ffc107"/>
  <text x="670" y="625" text-anchor="middle" font-size="10" fill="white">EIP</text>
  <text x="670" y="640" text-anchor="middle" font-size="10" fill="#6c757d">ArgoCD Access</text>
  
  <!-- Resource Metrics -->
  <rect x="1050" y="540" width="280" height="120" fill="#e9ecef" stroke="#adb5bd" stroke-width="1" rx="8"/>
  <text x="1070" y="565" font-size="14" font-weight="bold" fill="#495057">Resource Summary</text>
  <text x="1070" y="585" font-size="11" fill="#6c757d">• Total CPU Requests: 1.25 cores</text>
  <text x="1070" y="600" font-size="11" fill="#6c757d">• Total Memory Requests: 1.5Gi</text>
  <text x="1070" y="615" font-size="11" fill="#6c757d">• Storage: 30Gi persistent</text>
  <text x="1070" y="630" font-size="11" fill="#6c757d">• Network: ClusterIP + Ingress</text>
  <text x="1070" y="645" font-size="11" fill="#6c757d">• High Availability: 3 app replicas</text>
  
  <!-- Security & Compliance -->
  <rect x="1050" y="680" width="280" height="100" fill="#d1ecf1" stroke="#bee5eb" stroke-width="1" rx="8"/>
  <text x="1070" y="705" font-size="14" font-weight="bold" fill="#0c5460">Security Features</text>
  <text x="1070" y="725" font-size="11" fill="#6c757d">• RBAC enabled</text>
  <text x="1070" y="740" font-size="11" fill="#6c757d">• Network policies</text>
  <text x="1070" y="755" font-size="11" fill="#6c757d">• Secret management</text>
  <text x="1070" y="770" font-size="11" fill="#6c757d">• SSL termination at LB</text>
  
  <!-- Legend -->
  <rect x="1050" y="800" width="280" height="130" fill="white" stroke="#dee2e6" stroke-width="1" rx="8"/>
  <text x="1190" y="825" text-anchor="middle" font-size="14" font-weight="bold" fill="#495057">Component Legend</text>
  
  <rect x="1070" y="835" width="15" height="15" fill="#dc3545" fill-opacity="0.2" stroke="#dc3545"/>
  <text x="1095" y="847" font-size="11" fill="#495057">Rails Application Pod</text>
  
  <rect x="1070" y="855" width="15" height="15" fill="#336791" fill-opacity="0.2" stroke="#336791"/>
  <text x="1095" y="867" font-size="11" fill="#495057">PostgreSQL StatefulSet</text>
  
  <rect x="1070" y="875" width="15" height="15" fill="#28a745" fill-opacity="0.2" stroke="#28a745"/>
  <text x="1095" y="887" font-size="11" fill="#495057">Kubernetes Service</text>
  
  <rect x="1070" y="895" width="15" height="15" fill="#17a2b8" fill-opacity="0.2" stroke="#17a2b8"/>
  <text x="1095" y="907" font-size="11" fill="#495057">Ingress Controller</text>
  
  <rect x="1070" y="915" width="15" height="15" fill="#6f42c1" fill-opacity="0.2" stroke="#6f42c1"/>
  <text x="1095" y="927" font-size="11" fill="#495057">Persistent Storage</text>
  
  <!-- Arrow marker definitions -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#34495e"/>
    </marker>
    <marker id="whitearrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#ffffff"/>
    </marker>
  </defs>
</svg>